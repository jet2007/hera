### 任务组的发布同步助手

- 使用本发布同步助手的建议：
    - 所有任务的开发工作(增删改)在dev环境实现；
    - prod环境的任务尽量只能从dev环境进行发布；
    - dev环境的任务开发之前，从prod环境同步任务到dev环境；

- 环境配置方式
    - dev/prod方式：有2个hera环境，使用dev/prod方式 
    - dev/pre/prod方式：有3个hera环境，pre为准生产环境
        + dev：开发任务作业；
        + pre: pre为dev的发布目标pub环境；dev为pre的目标同步环境
        + prod：prod为pre的发布目标pub环境；pre为prod的目标同步环境
        + 即dev/pre为一对；pre/prod为一对

##### 发布

- 发布是指从dev环境发布任务组(小目录)到prod环境；
- 发布任务组时，会进行验证操作；即验证待发布的dev任务组在prod环境存在且相等。相等条件是指任务组从根到当前目录的所有目录的id,name,owner都相等或者prod环境不存在目录。
- 发布任务组时，任务组下的原来所有任务会被清空。
- 只支持发布小目录；且只发布目录下的任务，不发布目录结构；
- 发布前会检查prod环境目录结构是否合格：待发布的自目录+父目录的[id,name,owner,parent]相等。
- 强烈建议：发布之前，先进行同步任务(sync.sh),再进行发布任务；
```
# 发布小目录12
sh  pub.sh -group 12  -remark '说明'

```


##### 同步

- 同步是指从prod环境发布任务组到dev环境；
- 同步任务组时，任务组下的原来所有任务会被清空。
- 同步方式有： 只同步目录结构、同步目录结构+任务
    -  同步目录结构：自目录的父目录+子目录+自目录
    -  同步任务：子目录+自目录下的所有任务
```shell
# 只同步目录结构，不同步任务
sh  sync.sh -group 9 -type 'dir' -remark '说明'
# 同步目录结构+任务
sh  sync.sh -group 9 -type 'all' -remark '说明'

```

